{"ast":null,"code":"var e,\n  n = require(\"react\"),\n  t = (e = require(\"resize-observer-polyfill\")) && \"object\" == typeof e && \"default\" in e ? e.default : e,\n  r = {\n    debug: 10,\n    info: 20,\n    warn: 30,\n    error: 40,\n    none: 100\n  },\n  i = \"undefined\" != typeof window && window.document && window.document.createElement ? n.useLayoutEffect : n.useEffect;\nmodule.exports = function (e) {\n  void 0 === e && (e = {});\n  var o = e.logLevel;\n  void 0 === o && (o = \"info\");\n  var c = e.maxFontSize;\n  void 0 === c && (c = 100);\n  var f = e.minFontSize;\n  void 0 === f && (f = 20);\n  var u = e.onFinish,\n    a = e.onStart,\n    s = e.resolution;\n  void 0 === s && (s = 5);\n  var l = r[o],\n    S = n.useCallback(function () {\n      return {\n        calcKey: 0,\n        fontSize: c,\n        fontSizePrev: f,\n        fontSizeMax: c,\n        fontSizeMin: f\n      };\n    }, [c, f]),\n    d = n.useRef(null),\n    v = n.useRef(),\n    z = n.useRef(!1),\n    m = n.useState(S),\n    w = m[0],\n    M = m[1],\n    h = w.calcKey,\n    y = w.fontSize,\n    x = w.fontSizeMax,\n    b = w.fontSizeMin,\n    g = w.fontSizePrev,\n    F = null,\n    K = n.useState(function () {\n      return new t(function () {\n        F = window.requestAnimationFrame(function () {\n          z.current || (a && a(), z.current = !0, M(Object.assign({}, S(), {\n            calcKey: h + 1\n          })));\n        });\n      });\n    })[0];\n  n.useEffect(function () {\n    return d.current && K.observe(d.current), function () {\n      F && window.cancelAnimationFrame(F), K.disconnect();\n    };\n  }, [F, K]);\n  var E = d.current && d.current.innerHTML;\n  return n.useEffect(function () {\n    0 === h || z.current || (E !== v.current && (a && a(), M(Object.assign({}, S(), {\n      calcKey: h + 1\n    }))), v.current = E);\n  }, [h, S, E, a]), i(function () {\n    if (0 !== h) {\n      var e = Math.abs(y - g) <= s,\n        n = !!d.current && (d.current.scrollHeight > d.current.offsetHeight || d.current.scrollWidth > d.current.offsetWidth),\n        t = y > g;\n      if (e) n && y === g ? (z.current = !1, l <= r.info && console.info(\"[use-fit-text] reached `minFontSize = \" + f + \"` without fitting text\")) : n ? M({\n        fontSize: t ? g : b,\n        fontSizeMax: x,\n        fontSizeMin: b,\n        fontSizePrev: g,\n        calcKey: h\n      }) : (z.current = !1, u && u(y));else {\n        var i,\n          o = x,\n          c = b;\n        n ? (i = t ? g - y : b - y, o = Math.min(x, y)) : (i = t ? x - y : g - y, c = Math.max(b, y)), M({\n          calcKey: h,\n          fontSize: y + i / 2,\n          fontSizeMax: o,\n          fontSizeMin: c,\n          fontSizePrev: y\n        });\n      }\n    }\n  }, [h, y, x, b, g, u, d, s]), {\n    fontSize: y + \"%\",\n    ref: d\n  };\n};","map":{"version":3,"names":["r","debug","info","warn","error","none","i","window","document","createElement","n","useLayoutEffect","useEffect","module","exports","e","o","logLevel","c","maxFontSize","f","minFontSize","u","onFinish","a","onStart","s","resolution","l","S","useCallback","calcKey","fontSize","fontSizePrev","fontSizeMax","fontSizeMin","d","useRef","v","z","m","useState","w","M","h","y","x","b","g","F","K","t","requestAnimationFrame","current","Object","assign","observe","cancelAnimationFrame","disconnect","E","innerHTML","Math","abs","scrollHeight","offsetHeight","scrollWidth","offsetWidth","console","min","max","ref"],"sources":["D:\\project\\_CodeFiles\\wuthering\\Frontend\\node_modules\\use-fit-text\\index.ts"],"sourcesContent":["import {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport ResizeObserver from \"resize-observer-polyfill\";\n\nexport type TLogLevel = \"debug\" | \"info\" | \"warn\" | \"error\" | \"none\";\n\nexport type TOptions = {\n  logLevel?: TLogLevel;\n  maxFontSize?: number;\n  minFontSize?: number;\n  onFinish?: (fontSize: number) => void;\n  onStart?: () => void;\n  resolution?: number;\n};\n\nconst LOG_LEVEL: Record<TLogLevel, number> = {\n  debug: 10,\n  info: 20,\n  warn: 30,\n  error: 40,\n  none: 100,\n};\n\n// Suppress `useLayoutEffect` warning when rendering on the server\n// https://gist.github.com/gaearon/e7d97cdf38a2907924ea12e4ebdf3c85\nconst useIsoLayoutEffect =\n  typeof window !== \"undefined\" &&\n  window.document &&\n  window.document.createElement\n    ? useLayoutEffect\n    : useEffect;\n\nconst useFitText = ({\n  logLevel: logLevelOption = \"info\",\n  maxFontSize = 100,\n  minFontSize = 20,\n  onFinish,\n  onStart,\n  resolution = 5,\n}: TOptions = {}) => {\n  const logLevel = LOG_LEVEL[logLevelOption];\n\n  const initState = useCallback(() => {\n    return {\n      calcKey: 0,\n      fontSize: maxFontSize,\n      fontSizePrev: minFontSize,\n      fontSizeMax: maxFontSize,\n      fontSizeMin: minFontSize,\n    };\n  }, [maxFontSize, minFontSize]);\n\n  const ref = useRef<HTMLDivElement>(null);\n  const innerHtmlPrevRef = useRef<string>();\n  const isCalculatingRef = useRef(false);\n  const [state, setState] = useState(initState);\n  const { calcKey, fontSize, fontSizeMax, fontSizeMin, fontSizePrev } = state;\n\n  // Montior div size changes and recalculate on resize\n  let animationFrameId: number | null = null;\n  const [ro] = useState(\n    () =>\n      new ResizeObserver(() => {\n        animationFrameId = window.requestAnimationFrame(() => {\n          if (isCalculatingRef.current) {\n            return;\n          }\n          onStart && onStart();\n          isCalculatingRef.current = true;\n          // `calcKey` is used in the dependencies array of\n          // `useIsoLayoutEffect` below. It is incremented so that the font size\n          // will be recalculated even if the previous state didn't change (e.g.\n          // when the text fit initially).\n          setState({\n            ...initState(),\n            calcKey: calcKey + 1,\n          });\n        });\n      }),\n  );\n\n  useEffect(() => {\n    if (ref.current) {\n      ro.observe(ref.current);\n    }\n    return () => {\n      animationFrameId && window.cancelAnimationFrame(animationFrameId);\n      ro.disconnect();\n    };\n  }, [animationFrameId, ro]);\n\n  // Recalculate when the div contents change\n  const innerHtml = ref.current && ref.current.innerHTML;\n  useEffect(() => {\n    if (calcKey === 0 || isCalculatingRef.current) {\n      return;\n    }\n    if (innerHtml !== innerHtmlPrevRef.current) {\n      onStart && onStart();\n      setState({\n        ...initState(),\n        calcKey: calcKey + 1,\n      });\n    }\n    innerHtmlPrevRef.current = innerHtml;\n  }, [calcKey, initState, innerHtml, onStart]);\n\n  // Check overflow and resize font\n  useIsoLayoutEffect(() => {\n    // Don't start calculating font size until the `resizeKey` is incremented\n    // above in the `ResizeObserver` callback. This avoids an extra resize\n    // on initialization.\n    if (calcKey === 0) {\n      return;\n    }\n\n    const isWithinResolution = Math.abs(fontSize - fontSizePrev) <= resolution;\n    const isOverflow =\n      !!ref.current &&\n      (ref.current.scrollHeight > ref.current.offsetHeight ||\n        ref.current.scrollWidth > ref.current.offsetWidth);\n    const isFailed = isOverflow && fontSize === fontSizePrev;\n    const isAsc = fontSize > fontSizePrev;\n\n    // Return if the font size has been adjusted \"enough\" (change within `resolution`)\n    // reduce font size by one increment if it's overflowing.\n    if (isWithinResolution) {\n      if (isFailed) {\n        isCalculatingRef.current = false;\n        if (logLevel <= LOG_LEVEL.info) {\n          console.info(\n            `[use-fit-text] reached \\`minFontSize = ${minFontSize}\\` without fitting text`,\n          );\n        }\n      } else if (isOverflow) {\n        setState({\n          fontSize: isAsc ? fontSizePrev : fontSizeMin,\n          fontSizeMax,\n          fontSizeMin,\n          fontSizePrev,\n          calcKey,\n        });\n      } else {\n        isCalculatingRef.current = false;\n        onFinish && onFinish(fontSize);\n      }\n      return;\n    }\n\n    // Binary search to adjust font size\n    let delta: number;\n    let newMax = fontSizeMax;\n    let newMin = fontSizeMin;\n    if (isOverflow) {\n      delta = isAsc ? fontSizePrev - fontSize : fontSizeMin - fontSize;\n      newMax = Math.min(fontSizeMax, fontSize);\n    } else {\n      delta = isAsc ? fontSizeMax - fontSize : fontSizePrev - fontSize;\n      newMin = Math.max(fontSizeMin, fontSize);\n    }\n    setState({\n      calcKey,\n      fontSize: fontSize + delta / 2,\n      fontSizeMax: newMax,\n      fontSizeMin: newMin,\n      fontSizePrev: fontSize,\n    });\n  }, [\n    calcKey,\n    fontSize,\n    fontSizeMax,\n    fontSizeMin,\n    fontSizePrev,\n    onFinish,\n    ref,\n    resolution,\n  ]);\n\n  return { fontSize: `${fontSize}%`, ref };\n};\n\nexport default useFitText;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}